<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Murmuration (3.0.0) üê¶‚ú®</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      font-family: 'Roboto', sans-serif;
      background: linear-gradient(to bottom, #0175C2, #1E1E1E);
      color: #ECEFF1;
    }

    header {
      background: #02569B;
      padding: 20px;
      text-align: center;
      box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.2);
    }

    header h1 {
      font-size: 2.5rem;
      margin: 0;
      color: #FFFFFF;
    }

    header p {
      margin: 5px 0 0;
      font-size: 1.1rem;
      color: #B3E5FC;
    }

    header .buttons {
      margin-top: 10px;
    }

    header .buttons a {
      text-decoration: none;
      background: #1E88E5;
      color: #FFFFFF;
      padding: 10px 15px;
      border-radius: 5px;
      margin: 5px;
      font-weight: 500;
      transition: background 0.3s;
    }

    header .buttons a:hover {
      background: #1565C0;
    }

    .content {
      max-width: 800px;
      /* Adjusted for better centering */
      margin: 20px auto;
      padding: 20px;
      background: #263238;
      border-radius: 10px;
      box-shadow: 0px 6px 10px rgba(0, 0, 0, 0.3);
      text-align: left;
      /* Align text to the left for better readability */
    }

    .content h2 {
      color: #0288D1;
      border-bottom: 2px solid #0288D1;
      padding-bottom: 5px;
    }

    .content code {
      background: #37474F;
      color: #81D4FA;
      padding: 2px 4px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
    }

    .code-block {
      background: #37474F;
      padding: 15px;
      border-radius: 5px;
      overflow-x: auto;
    }

    .code-block pre {
      margin: 0;
      color: #ECEFF1;
    }

    .table-of-contents ul {
      list-style: none;
      padding: 0;
    }

    .table-of-contents ul li {
      margin: 5px 0;
    }

    .table-of-contents a {
      text-decoration: none;
      color: #03A9F4;
    }

    footer {
      text-align: center;
      padding: 10px;
      background: #02569B;
      margin-top: 20px;
      color: #B3E5FC;
    }

    footer a {
      color: #81D4FA;
      text-decoration: none;
    }

    .logo {
      max-width: 400px;
    }
  </style>
</head>

<body>
  <header>
    <img src="assets/logo.png" alt="Murmuration Logo" class="logo">
    <h1>Murmuration (3.0.0)</h1>
    <p>A powerful and flexible AI agent framework for building intelligent applications with support for multiple LLM
      providers and tool chaining. Murmuration provides type-safe, thread-safe, and reliable systems for agent
      coordination, state management, and function execution.</p>
    <div class="buttons">
      <a href="https://github.com/AgnivaMaiti/murmuration" target="_blank" style="padding: 2px">GitHub Repository</a>
      <a href="tutorial.html" style="padding: 2px">Tutorials</a>
    </div>
  </header>

  <div class="content">
    <h2>‚ö†Ô∏è WARNING</h2>
    <p>If you plan to use this in production, ensure you have proper error handling and testing in place as interaction
      with AI models can be unpredictable.</p>

    <h2>About Murmuration</h2>
    <p>The name "Murmuration" is inspired by the mesmerizing flocking behavior of birds, symbolizing the framework's
      focus on coordinated agent interactions and dynamic workflows. üê¶üí´</p>

    <h2>What's New in Murmuration 3.0.0 üê¶</h2>
    <ul>
      <li><strong>Multiple LLM Provider Support</strong>: Added support for OpenAI, Google, and Anthropic models with an
        extensible provider system.</li>
      <li><strong>Enhanced Tool System</strong>: Improved type safety and validation for tools and parameters.</li>
      <li><strong>Improved State Management</strong>: Thread-safe operations with immutable state and type-safe access.
      </li>
      <li><strong>Comprehensive Error Handling</strong>: New error handling system with detailed reporting.</li>
      <li><strong>Enhanced Logging</strong>: Structured logging with performance metrics and error tracking.</li>
      <li><strong>Security Improvements</strong>: Secure API key handling, input validation, and access control.</li>
      <li><strong>Resource Management</strong>: Memory optimization, connection pooling, and rate limiting.</li>
    </ul>

    <h2>Breaking Changes</h2>
    <p>This version includes significant changes that may require updates to your implementation. Please refer to the <a
        href="migration-guide.html">Migration Guide</a> for detailed steps to upgrade smoothly.</p>
    <h2>Table of Contents üìö</h2>
    <div class="table-of-contents">
      <ul>
        <li><a href="#overview">Overview</a></li>
        <li><a href="#installation">Installation</a></li>
        <li><a href="#core-features">Core Features</a></li>
        <li><a href="#usage-guide">Usage Guide</a></li>
        <li><a href="#architecture-overview">Architecture Overview</a></li>
        <li><a href="#core-systems">Core Systems</a></li>
        <li><a href="#real-world-examples">Real-World Examples</a></li>
        <li><a href="#troubleshooting">Troubleshooting</a></li>
        <li><a href="#best-practices">Best Practices</a></li>
        <li><a href="#contributing">Contributing</a></li>
        <li><a href="#license">License</a></li>
        <li><a href="#author">Author</a></li>
      </ul>
    </div>

    <h2 id="overview">Overview üîç</h2>
    <p>Murmuration offers:</p>
    <ul>
      <li>Type-safe schema validation system for ensuring data integrity</li>
      <li>Thread-safe state management to prevent race conditions</li>
      <li>Robust error handling with detailed error reporting</li>
      <li>Message history management with persistence</li>
      <li>Tool and function integration for extended capabilities</li>
      <li>Agent chain orchestration for complex workflows</li>
      <li>Streaming response support for real-time processing</li>
      <li>Comprehensive logging for debugging and monitoring</li>
    </ul>

    <h2 id="installation">Installation ‚öôÔ∏è</h2>
    <p>Add to your <code>pubspec.yaml</code>:</p>
    <div class="code-block">
      <pre>dependencies:
  murmuration: ^3.0.0</pre>
    </div>
    <p>Then run:</p>
    <div class="code-block">
      <pre>dart pub get</pre>
    </div>

    <h2 id="core-features">Core Features üõ†Ô∏è</h2>
    <h3>Configuration</h3>
    <div class="code-block">
      <pre>final config = MurmurationConfig(
  provider: LLMProvider.openAI,  // Choose from OpenAI, Google, or Anthropic
  apiKey: 'your-api-key',
  model: 'gpt-4-turbo-preview',  // Model specific to the chosen provider
  debug: true,                    // Enable debug mode for verbose logging
  stream: false,                  // Disable streaming by default
  logger: MurmurationLogger(enabled: true),  // Enable logging
  timeout: Duration(seconds: 30),  // Set request timeout
  maxRetries: 3,                 // Number of retry attempts
  retryDelay: Duration(seconds: 1),  // Delay between retries
  enableCache: true,             // Enable response caching
  cacheTimeout: Duration(hours: 1),  // Cache expiration time
  rateLimit: RateLimit(          // Rate limiting configuration
    requestsPerMinute: 60,
    maxConcurrentRequests: 5
  )
);</pre>
    </div>

    <h3>Error Handling</h3>
    <div class="code-block">
      <pre>try {
  final result = await agent.execute("Process data");
} on MurmurationException catch (e) {
  print('Error: ${e.message}');  // Human-readable error message
  print('Original error: ${e.originalError}');  // Original exception
  print('Stack trace: ${e.stackTrace}');  // Full stack trace
}</pre>
    </div>

    <h3>Logging</h3>
    <div class="code-block">
      <pre>final logger = MurmurationLogger(
  enabled: true,
  onLog: (message) => print('Log: $message'),  // Log handler
  onError: (message, error, stackTrace) {      // Error handler
    print('Error: $message');
    print('Details: $error');
  }
);</pre>
    </div>

    <h2 id="usage-guide">Usage Guide üìñ</h2>
    <h3>Basic Usage</h3>
    <div class="code-block">
      <pre>void main() async {
  final murmur = Murmuration(config);

  final agent = await murmur.createAgent(
    {'role': 'Assistant', 'context': 'Data processing'},
    currentAgentIndex: 1,
    totalAgents: 1
  );

  final result = await agent.execute("Process this data");
  print(result.output);
}</pre>
    </div>

    <h3>Advanced Usage</h3>
    <h4>Custom Schema Fields</h4>
    <div class="code-block">
      <pre>class DateTimeSchemaField extends SchemaField<DateTime> {
  final DateTime? minDate;
  final DateTime? maxDate;

  const DateTimeSchemaField({
    required String description,
    this.minDate,
    this.maxDate,
    bool required = true,
  }) : super(
    description: description,
    required: required,
  );

  @override
  bool isValidType(Object? value) =>
    value == null ||
    value is DateTime ||
    (value is String && DateTime.tryParse(value) != null);

  @override
  bool validate(DateTime? value) {
    if (value == null) return !required;
    if (minDate != null && value.isBefore(minDate!)) return false;
    if (maxDate != null && value.isAfter(maxDate!)) return false;
    return true;
  }

  @override
  DateTime? convert(Object? value) {
    if (value == null) return null;
    if (value is DateTime) return value;
    if (value is String) return DateTime.tryParse(value);
    return null;
  }
}

// Usage example:
final schema = OutputSchema(
  fields: {
    'name': StringSchemaField(
      description: 'User  name',
      minLength: 2,
      required: true
    ),
    'birthDate': DateTimeSchemaField(
      description: 'Birth date',
      minDate: DateTime(1900),
      maxDate: DateTime.now(),
      required: true
    )
  }
);</pre>
    </div>

    <h3>Streaming Responses üåä</h3>
    <div class="code-block">
      <pre>final config = MurmurationConfig(
  apiKey: 'your-api-key',
  stream: true,  // Enable streaming
  onStreamProgress: (progress) {  // Track streaming progress
    print('Progress: ${progress.percentage}%');
    print('Tokens received: ${progress.tokensReceived}');
    print('Time elapsed: ${progress.timeElapsed}');
  }
);

final agent = await murmur.createAgent({'role': 'Assistant'});
final result = await agent.execute("Generate a long story");

if (result.stream != null) {
  await for (final chunk in result.stream!) {
    print(chunk);  // Process each chunk as it arrives
  }
  
  // Access streaming statistics
  print('Total tokens: ${result.streamStats.totalTokens}');
  print('Stream duration: ${result.streamStats.duration}');
}</pre>
    </div>

    <h3>Agent Chains ‚õìÔ∏è</h3>
    <div class="code-block">
      <pre>final result = await murmur.runAgentChain(
  input: documentText,
  agentInstructions: [
    {'role': 'Document Parser'},
    {'role': 'Data Analyzer'},
    {'role': 'Report Generator'}
  ],
  tools: [
    Tool(
      name: 'document_parser',
      description: 'Parses document text',
      parameters: {'text': StringSchemaField(description: 'Document text')},
      execute: (params) async => parseDocument(params['text'])
    )
  ],
  functions: {
    'analyze': (params) async => analyzeData(params),
    'generate_report': (params) async => generateReport(params)
  },
  logProgress: true,
  onProgress: (progress) {
    print('Progress: ${progress.currentAgent}/${progress.totalAgents}');
    print('Status: ${progress.status}');
  }
);

print('Final report: ${result.finalOutput}');</pre>
    </div>

    <h2 id="core-systems">Core Systems üîß</h2>
    <h3>1. Message History</h3>
    <div class="code-block">
      <pre>final history = MessageHistory(
  threadId: 'user-123',       // Unique thread identifier
  maxMessages: 50,            // Maximum messages to retain
  maxTokens: 4000             // Maximum total tokens
);

await history.addMessage(Message(
  role: 'user',
  content: 'Hello!',
  timestamp: DateTime.now()
));

await history.save();    // Persist to storage
await history.load();    // Load from storage
await history.clear();   // Clear history</pre>
    </div>

    <h3>2. State Management</h3>
    <div class="code-block">
      <pre>final state = ImmutableState()
  .copyWith({
    'user': {'name': 'John', 'age': 30},
    'preferences': {'theme': 'dark'}
  });

final userName = state.get<String>('user.name');  // Type-safe access</pre>
    </div>

    <h2 id="real-world-examples">Real-World Examples üí°</h2>
    <h3>Customer Support Bot</h3>
    <div class="code-block">
      <pre>final supportBot = await murmur.createAgent({
  'role': 'Customer Support',
  'context': '''
    You are a helpful customer support agent.
    Follow company guidelines and maintain professional tone.
    Escalate sensitive issues to human support.
  '''
});

// Add ticket management tool
supportBot.addTool(Tool(
  name: 'create_ticket',
  description: 'Creates support ticket',
  parameters: {
    'priority': StringSchemaField(
      description: 'Ticket priority',
      enumValues: ['low', 'medium', 'high']
    ),
    'category': StringSchemaField(description: 'Issue category')
  },
  execute: (params) async => createSupportTicket(params)
));

final response = await supportBot.execute(userQuery);</pre>
    </div>

    <h3>Data Processing Pipeline</h3>
    <div class="code-block">
      <pre>final pipeline = await murmur.runAgentChain(
  input: rawData,
  agentInstructions: [
    {'role': 'Data Validator'},
    {'role': 'Data Transformer'},
    {'role': 'Data Analyzer'},
    {'role': 'Report Generator'}
  ],
  tools: [
    Tool(
      name: 'data_validation',
      description: 'Validates data format',
      execute: validateData
    ),
    Tool(
      name: 'data_transform',
      description: 'Transforms data format',
      execute: transformData
    )
  ]
);</pre>
    </div>

    <h2 id="troubleshooting">Troubleshooting üîç</h2>
    <h3>Common Issues</h3>
    <h4>Timeout Errors</h4>
    <div class="code-block">
      <pre>// Increase timeout duration
final config = MurmurationConfig(
  timeout: Duration(minutes: 2),
  maxRetries: 5
);</pre>
    </div>

    <h4>Memory Issues</h4>
    <div class="code-block">
      <pre>// Manage message history
final config = MurmurationConfig(
  maxMessages: 30,
  maxTokens: 2000
);</pre>
    </div>

    <h4>State Management Issues</h4>
    <div class="code-block">
      <pre>// Use proper state copying
final newState = state.copyWith(newData);
// Don't modify state directly
state._data['key'] = value;  // Wrong!</pre>
    </div>

    <h2 id="best-practices">Best Practices üèÜ</h2>
    <ol>
      <li><strong>Error Handling</strong>
        <ul>
          <li>Always wrap agent execution in try-catch blocks</li>
          <li>Implement proper retry mechanisms</li>
          <li>Log errors comprehensively</li>
          <li>Handle timeouts appropriately</li>
        </ul>
      </li>
      <li><strong>Performance</strong>
        <ul>
          <li>Enable caching for repetitive tasks</li>
          <li>Implement cleanup mechanisms</li>
          <li>Monitor memory usage</li>
          <li>Use appropriate timeout values</li>
        </ul>
      </li>
      <li><strong>Security</strong>
        <ul>
          <li>Validate all inputs</li>
          <li>Handle sensitive data carefully</li>
          <li>Implement proper access controls</li>
          <li>Monitor API usage</li>
        </ul>
      </li>
      <li><strong>Message History</strong>
        <ul>
          <li>Set appropriate message limits</li>
          <li>Implement cleanup policies</li>
          <li>Handle thread IDs carefully</li>
          <li>Monitor storage usage</li>
        </ul>
      </li>
    </ol>

    <h2 id="contributing">Contributing ü§ù</h2>
    <p>Guidelines for contributing to Murmuration:</p>
    <ol>
      <li>Fork the repository</li>
      <li>Create a feature branch</li>
      <li>Implement your changes</li>
      <li>Add tests</li>
      <li>Submit a pull request</li>
    </ol>
    <p>Please ensure your code:</p>
    <ul>
      <li>Follows Dart conventions</li>
      <li>Includes proper documentation</li>
      <li>Has comprehensive error handling</li>
      <li>Includes appropriate tests</li>
      <li>Maintains type safety</li>
    </ul>

    <h2 id="license">License üìú</h2>
    <p>This project is licensed under the MIT License - see the <a
        href="https://github.com/AgnivaMaiti/murmuration/blob/main/LICENSE">LICENSE</a> file for details.</p>

    <h2 id="author">Author ‚úçÔ∏è</h2>
    <p>This project is authored and maintained by <a href="https://github.com/AgnivaMaiti">Agniva Maiti</a>.</p>
  </div>

  <footer>
    <p>Created by <strong>Agniva Maiti</strong> ¬© 2025.</p>
  </footer>
</body>

</html>